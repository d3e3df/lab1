# Калькулятор M1

Простой калькулятор для вычисления математических выражений.

## Что это такое?

Это программа, которая умеет вычислять математические выражения, например:
- `2 + 3 * 4` (ответ: 14)
- `(2 + 3) * 4` (ответ: 20)
- `-2 ** 2` (ответ: -4)
- `7 // 2` (ответ: 3)

## Что умеет калькулятор?

### Основные операции:
- `+` - сложение
- `-` - вычитание
- `*` - умножение
- `/` - деление
- `//` - деление нацело (только для целых чисел)
- `%` - остаток от деления (только для целых чисел)
- `**` - возведение в степень

### Особенности:
- Работает с целыми и дробными числами: `2.5 + 1.5 = 4.0`
- Понимает скобки: `(2 + 3) * 4 = 20`
- Поддерживает отрицательные числа: `-5 + 3 = -2`
- Автоматически упрощает ответы: `4.0` покажется как `4`

### Что НЕ умеет:
- Не понимает два знака подряд: `2 ++ 3` - ошибка
- Не понимает выражения без скобок: `3 * -2` - ошибка (надо `3 * (-2)`)
- Не работает с буквами или другими символами

## Как пользоваться?

### Запуск программы:
```bash
python -m src.main
```

### Примеры использования:
```
> 2 + 3 * 4
Результат: 14

> (2 + 3) * 4
Результат: 20

> -2 ** 2
Результат: -4

> 5 / 0
Ошибка: Деление на ноль

> exit
```

### Правила написания выражений:
1. Используйте скобки для отрицательных чисел после операций: `3 * (-2)`
2. Между операторами должен быть пробел или число: `2+3` ок, `2 + 3` ок, `2 +3` ок
3. Степень вычисляется справа налево: `2 ** 3 ** 2 = 512`

## Структура проекта

```
lab1/
├── src/                    # Исходный код
│   ├── main.py            # Главная программа
│   ├── parser.py          # Разбор выражений
│   ├── tokenizer.py       # Разбиение на токены
│   └── constants.py       # Константы
├── tests/                 # Тесты
│   └── test_calculator.py
├── .gitignore            # Игнорируемые файлы для Git
├── .pre-commit-config.yaml # Автопроверки кода
├── pyproject.toml        # Настройки проекта
├── requirements.txt      # Зависимости
└── README.md            # Документация
```

## Запуск тестов

Чтобы проверить, что все работает правильно:
```bash
pytest tests/
```

## Возможные ошибки

### Синтаксические ошибки:

- `Два оператора подряд` - `2 ++ 3`, `3 * -2`, `5 + + 2`
- `Незакрытая скобка` - `(2 + 3`
- `Лишняя скобка` - `2 + 3)`
- `Неполное выражение` - `2 +` , `* 3`
- `Только оператор` - `+`, `-`
- `Неизвестный символ` - `2 @ 3`, `abc`, `2 & 5`

### Ошибки выполнения:

- `Деление на ноль` - `5 / 0`, `10 // 0`, `10 % 0`
- `// и % только для целых чисел` - `5.5 // 2`, `5.5 % 2`, `5 // 2.5`
- `Пустое выражение` - ввод пустой строки или пробелов

Для выхода из программы введите `exit`.
